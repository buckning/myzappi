<div class="deviceTile">
    <h2><img class="headerIconImage" src="assets/images/batteryFull.png" alt="Battery"> Libbi</h2>
    <div>
        State: {{libbiState}} <app-inline-schedule-panel [bearerToken]="bearerToken" [serialNumber]="serialNumber" [actionComponentType]="libbiSetEnabledActionPanelComponent"></app-inline-schedule-panel>
    </div>
    <br>
    <div>
        State of charge: {{stateOfCharge}}%
    </div>
    <br>
    <div *ngIf="registrationComplete === true">
        <div>
            Charge from grid: {{chargeFromGrid}} <app-inline-schedule-panel [bearerToken]="bearerToken" [serialNumber]="serialNumber" [actionComponentType]="libbiSetChargeFromGridActionPanelComponent"></app-inline-schedule-panel>
        </div>
        <br>
        <div>
            Charge target: {{energyTargetPercentage}}%
            <br>
            Charge target: {{energyTargetKWh}}kWh <app-inline-schedule-panel [bearerToken]="bearerToken" [serialNumber]="serialNumber" [actionComponentType]="libbiSetChargeTargetActionPanelComponent"></app-inline-schedule-panel>
        </div>
    </div>
    
    <br>
    <div *ngIf="registrationComplete === false">
        <h3>Enter myenergi credentials</h3>
        <p>
            Unlock more Libbi functionality by entering your myenergi myaccount details. 
            These are the credentials you use to access https://myaccount.myenergi.com
        </p>
    </div>
    <form id="loginCodeForm" *ngIf="registrationComplete === false">
        <div class="myenergiInputPanel">
            <label for="emailAddress">myenergi account email address:</label>
            <input class="myenergiEmailInput" type="text" [(ngModel)]="emailAddressText" name="emailAddress" autocomplete="off" required>
        </div>
        <br>
        <div class="myenergiInputPanel">
            <label for="password">myenergi account passsword:</label>
            <input class="myenergiEmailInput" type="password" [(ngModel)]="passwordText" name="password" autocomplete="off" required>
        </div>
        <br>
        <div>
            <button class="confirmButton" (click)="registerMyEnergiAccount()" [disabled]="registerButtonDisabled" type="button"
                id="submitBtn">Submit</button>
        </div>
    </form>
    
    <div id="messageContainer" *ngIf="messageText !== '' && registrationComplete === false">
        <div class="errorMessage">{{messageText}}</div>
    </div>
    <!-- <app-inline-schedule-panel [actionComponentType]="libbiSetChargeTargetActionPanelComponent"></app-inline-schedule-panel> -->
    <br>
    <div>
        <app-quote-carousel>
            <ng-template #carouselItem>
                "Alexa, ask my battery for the state of charge"
            </ng-template>
          
            <ng-template #carouselItem>
                "Alexa, ask my battery to enable"
            </ng-template>
          
            <ng-template #carouselItem>
                "Alexa, ask my battery to disable"
            </ng-template>
    
            <ng-template #carouselItem>
                "Alexa, ask my battery to set charge target to 100%"
            </ng-template>
          </app-quote-carousel>
    </div>
</div>
